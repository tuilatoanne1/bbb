module.exports.config = {
        name: "uptime",
        version: "1.0.0",
        hasPermssion: 0,
        credits: "VanHung",
        description: "Kiểm tra thời gian bot đã online",
        commandCategory: "System",
        usages: "uptime",
        cooldowns: 5
};

module.exports.run = async ({ api, event }) => {
        const axios = require('axios');
let time = process.uptime();
        const request = require('request');
const fs = require("fs");

        let hours = Math.floor(time / (60 * 60));
        let minutes = Math.floor((time % (60 * 60)) / 60);
        let seconds = Math.floor(time % 60);
        axios.get('https://video.xx.fbcdn.net/v/t42.3356-2/205982470_4106936296010108_8314911245231010397_n.mp4/video-1627105647.mp4?_nc_cat=109&ccb=1-3&_nc_sid=060d78&_nc_ohc=jLProoR3ke8AX8nOkSy&vabr=984162&_nc_ht=video.xx&oh=cc3467d5ee7324e6f4189690094e3f3c&oe=60FCE378&dl=1').then(res => {
        let ext = res.data.data.substring(res.data.data.lastIndexOf(".") + 1);
        var callback = () =>
                                api.sendMessage(
                                        {
                                                body: `Bot của đã hoạt động được ${hours} giờ ${minutes} phút ${seconds} giây.`,
                                                attachment: fs.createReadStream(__dirname + `/cache/2.mp4.${ext}`)
                                        },
                                        event.threadID,
                                        () => fs.unlinkSync(__dirname + `/cache/2.mp4.${ext}`),
                                        event.messageID
                                );
                 return request(res.data.data).pipe(fs.createWriteStream(__dirname + `/cache/2.mp4.${ext}`)).on("close", callback);
});
}
